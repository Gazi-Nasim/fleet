{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.calculateNewValue = calculateNewValue;\nvar _selectionRange = require(\"./selectionRange\");\nvar _getValue2 = require(\"./getValue\");\nvar _isValidDateValue = require(\"./isValidDateValue\");\nvar _isValidInputTimeValue = require(\"./isValidInputTimeValue\");\nfunction calculateNewValue(newEntry, element) {\n  let value = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : (() => {\n    var _getValue;\n    return (_getValue = (0, _getValue2.getValue)(element)) != null ? _getValue : /* istanbul ignore next */\n    '';\n  })();\n  let selectionRange = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : (0, _selectionRange.getSelectionRange)(element);\n  let deleteContent = arguments.length > 4 ? arguments[4] : undefined;\n  const selectionStart = selectionRange.selectionStart === null ? value.length : selectionRange.selectionStart;\n  const selectionEnd = selectionRange.selectionEnd === null ? value.length : selectionRange.selectionEnd;\n  const prologEnd = Math.max(0, selectionStart === selectionEnd && deleteContent === 'backward' ? selectionStart - 1 : selectionStart);\n  const prolog = value.substring(0, prologEnd);\n  const epilogStart = Math.min(value.length, selectionStart === selectionEnd && deleteContent === 'forward' ? selectionEnd + 1 : selectionEnd);\n  const epilog = value.substring(epilogStart, value.length);\n  let newValue = `${prolog}${newEntry}${epilog}`;\n  const newSelectionStart = prologEnd + newEntry.length;\n  if (element.type === 'date' && !(0, _isValidDateValue.isValidDateValue)(element, newValue)) {\n    newValue = value;\n  }\n  if (element.type === 'time' && !(0, _isValidInputTimeValue.isValidInputTimeValue)(element, newValue)) {\n    if ((0, _isValidInputTimeValue.isValidInputTimeValue)(element, newEntry)) {\n      newValue = newEntry;\n    } else {\n      newValue = value;\n    }\n  }\n  return {\n    newValue,\n    newSelectionStart\n  };\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","calculateNewValue","_selectionRange","require","_getValue2","_isValidDateValue","_isValidInputTimeValue","newEntry","element","arguments","length","undefined","_getValue","getValue","selectionRange","getSelectionRange","deleteContent","selectionStart","selectionEnd","prologEnd","Math","max","prolog","substring","epilogStart","min","epilog","newValue","newSelectionStart","type","isValidDateValue","isValidInputTimeValue"],"sources":["D:/Xampp/htdocs/fleet/frontend/node_modules/@testing-library/user-event/dist/utils/edit/calculateNewValue.js"],"sourcesContent":["\"use strict\";\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.calculateNewValue = calculateNewValue;\r\n\r\nvar _selectionRange = require(\"./selectionRange\");\r\n\r\nvar _getValue2 = require(\"./getValue\");\r\n\r\nvar _isValidDateValue = require(\"./isValidDateValue\");\r\n\r\nvar _isValidInputTimeValue = require(\"./isValidInputTimeValue\");\r\n\r\nfunction calculateNewValue(newEntry, element, value = (() => {\r\n  var _getValue;\r\n\r\n  return (_getValue = (0, _getValue2.getValue)(element)) != null ? _getValue :\r\n  /* istanbul ignore next */\r\n  '';\r\n})(), selectionRange = (0, _selectionRange.getSelectionRange)(element), deleteContent) {\r\n  const selectionStart = selectionRange.selectionStart === null ? value.length : selectionRange.selectionStart;\r\n  const selectionEnd = selectionRange.selectionEnd === null ? value.length : selectionRange.selectionEnd;\r\n  const prologEnd = Math.max(0, selectionStart === selectionEnd && deleteContent === 'backward' ? selectionStart - 1 : selectionStart);\r\n  const prolog = value.substring(0, prologEnd);\r\n  const epilogStart = Math.min(value.length, selectionStart === selectionEnd && deleteContent === 'forward' ? selectionEnd + 1 : selectionEnd);\r\n  const epilog = value.substring(epilogStart, value.length);\r\n  let newValue = `${prolog}${newEntry}${epilog}`;\r\n  const newSelectionStart = prologEnd + newEntry.length;\r\n\r\n  if (element.type === 'date' && !(0, _isValidDateValue.isValidDateValue)(element, newValue)) {\r\n    newValue = value;\r\n  }\r\n\r\n  if (element.type === 'time' && !(0, _isValidInputTimeValue.isValidInputTimeValue)(element, newValue)) {\r\n    if ((0, _isValidInputTimeValue.isValidInputTimeValue)(element, newEntry)) {\r\n      newValue = newEntry;\r\n    } else {\r\n      newValue = value;\r\n    }\r\n  }\r\n\r\n  return {\r\n    newValue,\r\n    newSelectionStart\r\n  };\r\n}"],"mappings":"AAAA,YAAY;;AAEZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAC3CC,KAAK,EAAE;AACT,CAAC,CAAC;AACFD,OAAO,CAACE,iBAAiB,GAAGA,iBAAiB;AAE7C,IAAIC,eAAe,GAAGC,OAAO,CAAC,kBAAkB,CAAC;AAEjD,IAAIC,UAAU,GAAGD,OAAO,CAAC,YAAY,CAAC;AAEtC,IAAIE,iBAAiB,GAAGF,OAAO,CAAC,oBAAoB,CAAC;AAErD,IAAIG,sBAAsB,GAAGH,OAAO,CAAC,yBAAyB,CAAC;AAE/D,SAASF,iBAAiBA,CAACM,QAAQ,EAAEC,OAAO,EAM2C;EAAA,IANzCR,KAAK,GAAAS,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,MAAM;IAC3D,IAAIG,SAAS;IAEb,OAAO,CAACA,SAAS,GAAG,CAAC,CAAC,EAAER,UAAU,CAACS,QAAQ,EAAEL,OAAO,CAAC,KAAK,IAAI,GAAGI,SAAS,GAC1E;IACA,EAAE;EACJ,CAAC,GAAG;EAAA,IAAEE,cAAc,GAAAL,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC,EAAEP,eAAe,CAACa,iBAAiB,EAAEP,OAAO,CAAC;EAAA,IAAEQ,aAAa,GAAAP,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAE,SAAA;EACnF,MAAMM,cAAc,GAAGH,cAAc,CAACG,cAAc,KAAK,IAAI,GAAGjB,KAAK,CAACU,MAAM,GAAGI,cAAc,CAACG,cAAc;EAC5G,MAAMC,YAAY,GAAGJ,cAAc,CAACI,YAAY,KAAK,IAAI,GAAGlB,KAAK,CAACU,MAAM,GAAGI,cAAc,CAACI,YAAY;EACtG,MAAMC,SAAS,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEJ,cAAc,KAAKC,YAAY,IAAIF,aAAa,KAAK,UAAU,GAAGC,cAAc,GAAG,CAAC,GAAGA,cAAc,CAAC;EACpI,MAAMK,MAAM,GAAGtB,KAAK,CAACuB,SAAS,CAAC,CAAC,EAAEJ,SAAS,CAAC;EAC5C,MAAMK,WAAW,GAAGJ,IAAI,CAACK,GAAG,CAACzB,KAAK,CAACU,MAAM,EAAEO,cAAc,KAAKC,YAAY,IAAIF,aAAa,KAAK,SAAS,GAAGE,YAAY,GAAG,CAAC,GAAGA,YAAY,CAAC;EAC5I,MAAMQ,MAAM,GAAG1B,KAAK,CAACuB,SAAS,CAACC,WAAW,EAAExB,KAAK,CAACU,MAAM,CAAC;EACzD,IAAIiB,QAAQ,GAAI,GAAEL,MAAO,GAAEf,QAAS,GAAEmB,MAAO,EAAC;EAC9C,MAAME,iBAAiB,GAAGT,SAAS,GAAGZ,QAAQ,CAACG,MAAM;EAErD,IAAIF,OAAO,CAACqB,IAAI,KAAK,MAAM,IAAI,CAAC,CAAC,CAAC,EAAExB,iBAAiB,CAACyB,gBAAgB,EAAEtB,OAAO,EAAEmB,QAAQ,CAAC,EAAE;IAC1FA,QAAQ,GAAG3B,KAAK;EAClB;EAEA,IAAIQ,OAAO,CAACqB,IAAI,KAAK,MAAM,IAAI,CAAC,CAAC,CAAC,EAAEvB,sBAAsB,CAACyB,qBAAqB,EAAEvB,OAAO,EAAEmB,QAAQ,CAAC,EAAE;IACpG,IAAI,CAAC,CAAC,EAAErB,sBAAsB,CAACyB,qBAAqB,EAAEvB,OAAO,EAAED,QAAQ,CAAC,EAAE;MACxEoB,QAAQ,GAAGpB,QAAQ;IACrB,CAAC,MAAM;MACLoB,QAAQ,GAAG3B,KAAK;IAClB;EACF;EAEA,OAAO;IACL2B,QAAQ;IACRC;EACF,CAAC;AACH"},"metadata":{},"sourceType":"script","externalDependencies":[]}